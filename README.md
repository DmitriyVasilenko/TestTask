# TestTask (Тестовое задание)
<details close>
    <summary>
        <h3>Тестовое задание</h3>
    </summary>
Разработать веб-сервис на базе Asp Net MVC, для имитации внесения платежей в 
банковские системы. Требуется реализовать все функции CRUD.

- [x] 1.1) Внесение данных выполнять посредством ajax запросов при нажатии на кнопку 
«Отправить». 
- [x] 1.2) Если поле «Валюта» не заполнено – кнопка «Отправить» должна быть 
неактивна.
- [x] 1.3) Предусмотреть валидацию текстового поля с валютой, как на стороне 
клиента, так и на стороне сервера.
- [x] 1.4) Перед отправкой требуется обязательно выбрать банк-получатель из выпадающего 
списка. 
- [x] 1.5) Список банков в выпадающем списке необходимо получать со стороны 
сервера, при входе на страницу. 
- [x] 1.6) Задать список банков требуется в виде перечисления enum.

- [x] 2.1) Результатам операции Create – является суммирование активов банка по логике, 
присущей каждому банку отдельно (см. пункт 3). Если в банке было 200 у.е., а при 
нажатии на «Отправить» было указано 100 у.е. – результатом будет их сумма, т.е. 300 y.e.  
- [x] 2.2) Операции update, delete и read требуется реализовать только в виде rest-api в этом же 
приложении. 
- [x] 2.3) Update –на входе указать – «Банк» и «сумму», которую требуется установить. Если в 
банке хранилось 400 y.e., а было передано 200 – результатом будет замена активов 
указанного банка на 200.
- [x] 2.4) Delete – указать название банка, при выполнении операции «обнулить» активы банка.
- [x] 2.5) Read – вывести список активов всех банков в виде json.

- [x] 3.1) Разрешается использовать любую базу данных (MySql, Postgres и т.д.)
- [x] 3.2) Данные в базе данных должны храниться в единственной таблице «banks_total» с 3 
полями: id (задать в виде GUID), bank (банк, сопоставимый с перечислением enum на 
стороне сервера), total (сумма активов).
- [x] 3.3) Запрещено использовать готовые ORM. Необходимо написать собственную обертку 
для запросов к базе данных в виде подключаемой .dll библиотеки.

- [x] 4.1) При внесении активов в банк – требуется, не прибегая к базе данных реализовать 
следующую логику.
- [x] 4.2) При внесении активов для первого банка – умножать сумму на 3. Т.е. было введено в 
поле «валюта» значение 100 – внесено будет 300.
- [x] 4.3) Для второго банка – вычитать 50%.
- [x] 4.4) Для третьего – добавлять 50% и вычитать 100, результатом этой операции должно быть 
неотрицательное число, т.е. если в итоге операции вышло число «-30» - необходимо 
привести его к нулю.
- [x] 4.5) Для всех остальных банков реализовать логику по умолчанию: вносить то число, 
которые было указано в поле «Валюта».
- [x] 4.6) Разделение логики реализовать, прибегнув к паттерну «Strategy».

- [x] 5.1) Написать Unit тест для данной логики. Расположения теста логики `\xUnitTest\Stratrgy\TotalContext.cs`
</details>

<details close>
    <summary>
        <h3>Подключение настройка базы данных ![Postgres](https://img.shields.io/badge/postgres-%23316192.svg?style=for-the-badge&logo=postgresql&logoColor=white)</h3>
    </summary>

В файле `\Api\appsettings.json` добавляем строку подключения `ConnectionStrings -> DBConnection` для базы данных `Postgres`
```json
{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "AllowedHosts": "*",
  "ConnectionStrings": {
    "DBConnection": "Host=localhost;Port=5432;Database=TestTaskDB;Username=postgres;Password=123456"
  }
}
```
Поставте `Прокет для запуска` -> `Api`
Откройте `Консоль диспетчера пакетов`, и в консоли установите `Проект по умолчанию` -> `Infrastructure`, затем по очереди вводим две команды
```
PM> Add-Migration Initial_0 -Context ApplicationDbContext
PM> Update-Database -Context ApplicationDbContext
```
## Скриншот результата создание таблицы «banks_total» в базе «TestTaskDB»
![screenshot_0](https://github.com/DmitriyVasilenko/TestTask/img/screenshot_0.png)
</details>

<details close>
    <summary>
        <h3>Запуск проекта</h3>
    </summary>

Поставите `Проект для запуска` -> `Api` и `Web`
## Скриншот запущенного проекта Api
![screenshot_1](https://github.com/DmitriyVasilenko/TestTask/img/screenshot_1.png)
## Скриншот запущенного проекта Web
![screenshot_2](https://github.com/DmitriyVasilenko/TestTask/img/screenshot_2.png)
## Скриншот модального окна в запущенном проекте Web
![screenshot_2](https://github.com/DmitriyVasilenko/TestTask/img/screenshot_2.png)
</details>
